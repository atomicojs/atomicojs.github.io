function e(e,t){let n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const t=e=>"function"==typeof e,n=e=>"object"==typeof e,r=Symbol(""),o=Symbol(""),i={id:1,className:1,checked:1,value:1,selected:1},l={list:1,type:1,size:1,form:1,width:1,height:1,src:1},s={},u=[],a=document,f=Symbol();function c(e,t,...n){let r=t||s;return(n=function e(t,n,r=[]){for(let o=0;o<t.length;o++){let i=t[o];if(i){if(Array.isArray(i)){e(i,n,r);continue}null!=i.key&&(r._||(r._=new Map),r._.set(i.key,0))}let l=typeof i;i=null==i||"boolean"==l||"function"==l||"object"==l&&(i.vdom!=f||n)?"":i,n?r[0]=(r[0]||"")+i:r.push(i)}return r}(r.children||n,"style"==e)).length||(n=u),{vdom:f,type:e,props:r,children:n,key:r.key,shadow:r.shadowDom,raw:1==e.nodeType}}function h(e,t,n,o){let i;if(t&&t[e]&&t[e].vnode==n)return t;if(n&&n.type&&n.vdom!=f)return t;if((null!=n||!t)&&(o=o||"svg"==n.type,i="host"!=n.type&&(n.raw?t!=n.type:t?t.localName!=n.type:!t),i)){let e;if(null==n.type)return a.createTextNode(n+"");e=n.raw?n.type:o?a.createElementNS("http://www.w3.org/2000/svg",n.type):a.createElement(n.type,n.is?{is:n.is}:null),t=e}if(3==t.nodeType)return n+="",t.data!=n&&(t.data=n||""),t;let l=t[e]?t[e].vnode:s,c=l.props||s,p=l.children||u,y=i||!t[e]?{}:t[e].handlers;if(n.shadow&&(t.shadowRoot||t.attachShadow({mode:"open"})),n.props!=c&&function(e,t,n,r,o){for(let i in t)i in n||d(e,i,t[i],null,o,r);for(let i in n)d(e,i,t[i],n[i],o,r)}(t,c,n.props,y,o),n.children!=p){!function(e,t,n,o){let i=n._,l=n.length,s=t.childNodes,u=s.length,a=i?0:u>l?l:u;for(;a<u;a++){let e=s[a];if(i){let t=e[r];if(i.has(t)){i.set(t,e);continue}}a--,u--,e.remove()}for(let r=0;r<l;r++){let l=n[r],u=s[r],a=i?l.key:r,f=i?i.get(a):u;if(i&&f&&f!=u&&t.insertBefore(f,u),i&&null==l.key)continue;let c=h(e,f,l,o);f?c!=f&&t.replaceChild(c,f):s[r]?t.insertBefore(c,s[r]):t.appendChild(c)}}(e,n.shadow?t.shadowRoot:t,n.children,o)}return t[e]={vnode:n,handlers:y},t}function d(e,o,s,u,a,f){if(s=null==s?null:s,u=null==u?null:u,(o="class"!=o||a?o:"className")in e&&i[o]&&(s=e[o]),u!==s&&"shadowDom"!=o)if("o"==o[0]&&"n"==o[1]&&(t(u)||t(s)))!function(e,t,n,r){t=t.slice("-"==t[2]?3:2),r.handleEvent||(r.handleEvent=t=>r[t.type].call(e,t));n?(r[t]||e.addEventListener(t,r),r[t]=n):r[t]&&(e.removeEventListener(t,r),delete r[t])}(e,o,u,f);else if("key"==o)e[r]=u;else if("ref"==o)u&&(u.current=e);else if("style"==o){let t=e.style;u=u||"";let r=n(s=s||""),o=n(u);if(r)for(let e in s){if(!o)break;e in u||p(t,e,null)}if(o)for(let e in u){let n=u[e];r&&s[e]===n||p(t,e,n)}else t.cssText=u}else!a&&!l[o]&&o in e||t(u)||t(s)?e[o]=null==u?"":u:null==u?e.removeAttribute(o):e.setAttribute(o,n(u)?JSON.stringify(u):u)}function p(e,t,n){let r="setProperty";null==n&&(r="removeProperty",n=null),~t.indexOf("-")?e[r](t,n):e[t]=n}const y=1,m=2,v=3,b=4,w=5,g={};function _(e,t){e[0]&&(e[1]=e[0](e[1],t))}function k(e,t){for(let n in e)_(e[n],t)}function N(){return A(0,{current:g.ref.host})}function A(e,t){if(g.ref.hook)return g.ref.hook.use(e,t)[1]}function S(){return g.ref.render}const E=[!0,1,"","1","true"];function C(e,r,o,i,l){if(!(r in e)){let{type:s,reflect:u,event:a,value:f,attr:c=x(r)}=n(o)&&null!=o?o:{type:o},h=!(s==Function||null==s);Object.defineProperty(e,r,{set(e){let n=this[r],{error:o,value:i}=function(e,t){if(null==e)return{value:t};try{if(e==Boolean?t=E.includes(t):"string"==typeof t&&(t=e==Number?Number(t):e==Object||e==Array?JSON.parse(t):t),{}.toString.call(t)==`[object ${e.name}]`)return{value:t,error:e==Number&&Number.isNaN(t)}}catch(e){}return{value:t,error:!0}}(s,h&&t(e)?e(n):e);if(o&&null!=i)throw`The value defined for prop '${r}' must be of type '${s.name}'`;n!=i&&(this._props[r]=i,this._update(),this.updated.then(()=>{a&&j(this,a),u&&(this._ignoreAttr=c,O(this,s,c,this[r]),this._ignoreAttr=null)}))},get(){return this._props[r]}}),null!=f&&(l[r]=f),i[c]=r}}const j=(e,{type:t,...n})=>e.dispatchEvent(new CustomEvent(t,n)),x=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),O=(e,t,r,o)=>null==o||t==Boolean&&!o?e.removeAttribute(r):e.setAttribute(r,n(o)?JSON.stringify(o):t==Boolean?"":o);function P(e,t=HTMLElement){let n={},r={},{props:i}=e;class l extends t{constructor(){super(),this._ignoreAttr=null,this._props={},this.mounted=new Promise(e=>this.mount=e),this.unmounted=new Promise(e=>this.unmount=e);for(let e in r)this[e]=r[e];this._setup(),this._update()}async _setup(){let t=Symbol(),n=function(e,t){let n,r={},o={use:function(e,t){let n,o=g.index++;r[o]||(r[o]=[null,t],n=1);return r[o][0]=e,_(r[o],n?1:3),r[o]},load:function(e,t){g.index=0,g.ref=i;let n=e(t);return g.ref=0,n},updated:function(){let e=n?4:2;n=1,k(r,e)},unmount:function(){k(r,5)}},i={hook:o,host:t,render:e};return o}(()=>this._update(),this);this.update=()=>{((e,t,n=o)=>{h(n,t,e)})(n.load(e,{...this._props}),this,t),n.updated()},await this.unmounted,n.unmount()}async _update(){if(!this._prevent){let e;this._prevent=!0,this.updated=new Promise(t=>e=t),await this.mounted,this.update(),this._prevent=!1,e()}}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}attributeChangedCallback(e,t,r){e!==this._ignoreAttr&&t!==r&&(this[n[e]]=r)}}for(let e in i)C(l.prototype,e,i[e],n,r);return l.observedAttributes=Object.keys(n),l}export{y as H,A as a,t as b,P as c,S as d,b as e,m as f,w as g,c as h,e as i,v as j,N as u};
